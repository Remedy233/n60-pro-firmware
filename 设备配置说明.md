# 磊科 N60 Pro 设备配置说明

## ⚠️ 重要提示

在首次编译前，需要确认 ImmortalWrt MT798x 中 N60 Pro 的正确设备名称。

## 🔍 查看可用设备

### 方法一：查看 defconfig 目录（推荐）

ImmortalWrt MT798x 项目通常提供预配置文件：

```bash
# 克隆源码后
cd immortalwrt-mt798x

# 查看预配置文件
ls -la defconfig/

# 可能的文件：
# mt7981-ax3000.config    <- MT7981 通用配置
# mt7981-netcore-n60.config  <- 如果有专门的 N60 配置
```

### 方法二：使用 make menuconfig

```bash
cd immortalwrt-mt798x

# 更新 feeds
./scripts/feeds update -a
./scripts/feeds install -a

# 生成默认配置
make defconfig

# 打开配置菜单
make menuconfig
```

在配置界面：
1. 进入 **Target System** → 选择 `MediaTek Ralink ARM`
2. 进入 **Subtarget** → 选择 `MT7981`
3. 进入 **Target Profile** → 查看所有可用设备

可能的选项：
```
- Generic MT7981 Device          <- 通用配置，适用于大多数 MT7981 设备
- Netcore N60 Pro                <- 如果有专门支持
- H3C Magic NX30 Pro             <- 其他 MT7981 设备参考
- CMCC RAX3000M                  <- 其他 MT7981 设备参考
```

### 方法三：查看源码中的设备定义

```bash
cd immortalwrt-mt798x

# 搜索 N60 相关的设备定义
find target/linux/mediatek/dts -name "*n60*" -o -name "*netcore*"

# 查看 MT7981 的 Makefile
cat target/linux/mediatek/image/mt7981.mk | grep -i "n60\|netcore"
```

## 📝 配置文件适配

### 如果找到 N60 Pro 专门配置

假设设备名为 `netcore_n60-pro`：

```bash
# n60-pro.config 中的配置正确
CONFIG_TARGET_mediatek=y
CONFIG_TARGET_mediatek_mt7981=y
CONFIG_TARGET_mediatek_mt7981_DEVICE_netcore_n60-pro=y
```

### 如果没有专门配置（使用通用配置）

需要修改 `n60-pro.config`：

```bash
# 使用通用 MT7981 设备配置
CONFIG_TARGET_mediatek=y
CONFIG_TARGET_mediatek_mt7981=y
CONFIG_TARGET_MULTI_PROFILE=y
# 或者
CONFIG_TARGET_mediatek_mt7981_DEVICE_generic=y
```

### 如果使用预配置文件

```bash
# 复制项目提供的预配置
cp defconfig/mt7981-ax3000.config .config

# 然后进行个性化配置
make menuconfig

# 添加 iStoreOS 组件
# LuCI -> Applications -> luci-app-store
# LuCI -> Applications -> luci-app-quickstart

# 保存配置
cp .config ../n60-pro.config
```

## 🔧 推荐的首次编译流程

### 步骤 1：克隆源码
```bash
./build.sh
# 等待执行到 feeds 安装完成
```

### 步骤 2：手动确认设备
```bash
cd immortalwrt-mt798x

# 查看可用的预配置
ls defconfig/

# 如果有 mt7981 相关的配置
cp defconfig/mt7981-ax3000.config .config

# 或者使用 menuconfig 选择
make menuconfig
```

### 步骤 3：添加 iStoreOS 组件
```bash
make menuconfig

# 导航到：
LuCI --->
  Applications --->
    <*> luci-app-store (iStore 应用商店)
    <*> luci-app-quickstart (QuickStart 快速入门)
    
# 按空格键选中（显示为 <*>）
# 按 Y 键选中并包含
# 按 N 键不选中
# 按 M 键编译为模块

# 保存并退出（Save -> Exit）
```

### 步骤 4：保存配置
```bash
# 保存为项目配置
cp .config ../n60-pro.config

# 返回项目目录继续编译
cd ..
./build.sh compile
```

## 🎯 设备名称对照表

| 可能的设备名称 | 配置项 | 说明 |
|---------------|--------|------|
| `netcore_n60-pro` | `CONFIG_TARGET_mediatek_mt7981_DEVICE_netcore_n60-pro=y` | N60 Pro 专门配置 |
| `generic` | `CONFIG_TARGET_mediatek_mt7981_DEVICE_generic=y` | MT7981 通用配置 |
| `h3c_magic-nx30-pro` | `CONFIG_TARGET_mediatek_mt7981_DEVICE_h3c_magic-nx30-pro=y` | 类似硬件参考 |

## ⚙️ 硬件参数参考

磊科 N60 Pro 硬件规格：
- **CPU**: MediaTek MT7981B (双核 ARM Cortex-A53 @1.3GHz)
- **RAM**: 256MB DDR3
- **Flash**: 128MB SPI NAND
- **WiFi**: 2.4GHz + 5GHz (MT7976)
- **LAN**: 3 × 1000M + 1 × 2500M
- **WAN**: 1 × 1000M

如果找不到专门的 N60 Pro 配置，可以使用具有相似硬件的设备配置：
- H3C Magic NX30 Pro (同样是 MT7981B)
- CMCC RAX3000M (同样是 MT7981B)

## 📋 配置检查清单

编译前确认：

- [ ] 已确认设备 Profile 名称
- [ ] `n60-pro.config` 中的设备名称正确
- [ ] 已选中 iStoreOS 相关组件
- [ ] 已保存配置文件

## ❓ 常见问题

### Q: 找不到 netcore_n60-pro 设备怎么办？
**A**: 使用通用 MT7981 配置：
```bash
CONFIG_TARGET_mediatek_mt7981_DEVICE_generic=y
```
或参考其他 MT7981B 设备的配置。

### Q: 编译出的固件能用吗？
**A**: 只要芯片型号正确（MT7981B），通用配置的固件通常可以使用，只是可能缺少一些设备特定的优化。

### Q: 如何添加设备支持？
**A**: 如果项目没有 N60 Pro 支持，需要：
1. 创建 DTS 设备树文件
2. 修改 image Makefile
3. 这超出了本项目范围，建议使用通用配置

## 🔗 参考资源

- [ImmortalWrt MT798x 项目](https://github.com/padavanonly/immortalwrt-mt798x-6.6)
- [OpenWrt 设备页面](https://openwrt.org/toh/netcore/n60_pro)（如果有）
- [MT7981 芯片组设备列表](https://openwrt.org/docs/techref/hardware/soc/soc.mediatek.mt7981)

---

**建议：首次编译时使用通用 MT7981 配置，测试成功后再考虑针对性优化。**
